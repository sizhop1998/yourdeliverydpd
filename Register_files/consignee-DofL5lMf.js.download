let i,u,m;const y={DE:"DPD-DE",AT:"DPD-AT",CH:"DPD-CH",FR:"DPD-FR",IT:"BRT",ES:"SEUR",BE:"DPD-BE",LU:"DPD-LU",NL:"DPD-NL",PT:"DPD-PT",PL:"DPD-PL",LV:"DPD-LV",LT:"DPD-LT",EE:"DPD-EE",CZ:"DPD-CZ",HU:"DPD-HU",SK:"DPD-SK",SI:"DPD-SI",HR:"DPD-HR",RO:"DPD-RO",BG:"SPEEDY",IE:"DPD-IE",UK:"DPD-UK",AR:"DPD-AR",BR:"JADLOG",ZA:"DPD-ZA"};window.onload=function(){D();let t=document.getElementById("see-password"),e=document.getElementById("kc-info");e!=null&&(e.style.marginBottom="5px"),i=document.querySelectorAll(".form-floating"),document.querySelector(".register-box"),u=document.querySelectorAll(".delete-icon"),m=document.querySelectorAll(".form-floating input"),t?.addEventListener("click",h,!1),L(),P("guest"),p(),w(),f(),b(),S(),B(),v()};const p=()=>{const t=document.querySelector("#invalid-email-error"),e=document.querySelector("#missing-email-error");for(const o of i)o.addEventListener("input",n=>{n.target.parentNode.classList.remove("error"),e&&t&&(e.style.display="none",t.style.display="none")})},f=()=>{for(let t of m)["input","change","blur","click"].forEach(e=>{t.addEventListener(e,o=>{const n=o.target.id;var s=document.querySelector(`div.${n} > .delete-icon`),r=typeof s<"u"&&s!=null;o.type==="input"&&(o.target.value?(document.querySelector(`input#${n} `).style.border="1px solid #414042",r&&s.classList.remove("hide")):(document.querySelector(`input#${n} `).style.border="1px solid #808285",r&&s.classList.add("hide"))),o.type==="change"&&r&&s.classList.remove("hide"),o.type==="blur"&&r&&s.classList.add("hide"),o.type==="click"&&o.target.value&&r&&s.classList.remove("hide")})})},b=()=>{for(const t of u)t.addEventListener("mousedown",e=>{const o=e.target.offsetParent.classList[0];document.querySelector(`input#${o}`).value="",document.querySelector(`div.${o} > .delete-icon`).classList.add("hide")})},D=()=>{var t=document.querySelectorAll("#kc-update-profile-form input[name='username'] , #kc-update-profile-form input[name='email']");t.length>0&&t.forEach(function(e){e.setAttribute("readonly","readonly")})},h=()=>{const t=document.getElementById("password"),e=document.getElementById("see-password");t.getAttribute("type")=="password"?(t.setAttribute("type","text"),e.className="unsee-password"):(t.setAttribute("type","password"),e.className="see-password")},S=()=>{var t=[{provider:"Seur",idp:"seur"},{provider:"chrono",idp:"chrono"}];const e=new URL(window.location.href),o=new URLSearchParams(e.search);let n,s=!0;if(o.has("redirect_uri")){const a=o.get("redirect_uri"),g=new URL(a),l=new URLSearchParams(g.search);if(l.has("idp"))n=l.get("idp"),n&&t.forEach(c=>{c.idp===n&&(s=!1,window.location.href=e+"&kc_idp_hint="+c.provider)});else if(l.has("register")){n=l.get("register");var r=document.getElementById("registerLink");n==="true"&&typeof r<"u"&&r!=null&&(s=!1,r.click())}}s?document.getElementById("main-keycloak-div").style.display="flex":document.getElementById("main-keycloak-div").style.display="none"},L=()=>{const t=new URL(window.location.href),e=new URLSearchParams(t.search);if(e.has("redirect_uri")){const n=e.get("redirect_uri"),s=new URL(n),r=new URLSearchParams(s.search);r.has("bu")&&localStorage.setItem("bu",r.get("bu")),r.has("lang")&&localStorage.setItem("lang",r.get("lang")),r.has("privacy")&&localStorage.setItem("privacy",r.get("privacy")),r.has("terms")&&localStorage.setItem("terms",r.get("terms"))}else e.has("bu")&&e.has("lang")&&(localStorage.setItem("bu",e.get("bu")),localStorage.setItem("lang",e.get("lang")));if(document.getElementById("user.attributes.bu")!=null&&localStorage.getItem("bu")){var o=document.getElementById("user.attributes.bu");o.setAttribute("value",localStorage.getItem("bu"))}if(document.getElementById("user.attributes.lang")!=null&&localStorage.getItem("lang")){var o=document.getElementById("user.attributes.lang");o.setAttribute("value",localStorage.getItem("lang"))}},P=t=>{if(!localStorage.getItem("bu"))return;const o=y[localStorage.getItem("bu").toUpperCase()],n={event:"initialData",business_unit:o,user_type:t};return dataLayer.push(n),console.log(`${JSON.stringify(n)} pushed to DataLayer.`),{businessUnit:o,userType:t}},w=()=>{const t=localStorage.getItem("bu"),e=document.querySelector(".dpd-logo"),o=document.querySelector(".brt-logo");t&&(t.toLowerCase()==="it"||t.toLowerCase()==="brt")?(o.style.display="block",o.style.marginBottom="30px"):(e.style.display="block",e.style.marginBottom="60px")};var d=!1;const I=t=>{d||(window.location.href=t),d=!0},E=t=>{const e=document.forms["kc-reset-password-form"],o=i[0],n=document.querySelector("input#username"),s=document.querySelector("#invalid-email-error"),r=document.querySelector("#missing-email-error"),a=new RegExp("^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+.[a-zA-Z]{2,}$");n.value?a.test(n.value)?(e.action=t,e.submit()):(o.classList.add("error"),s.style.display="block",r.style.display="none"):(o.classList.add("error"),r.style.display="block",s.style.display="none")},v=()=>{document.getElementById("footerCopyright").innerHTML=new Date().getFullYear()},B=()=>{const t=document.getElementById("termsBrt"),e=localStorage.getItem("bu");t&&e&&(e.toLowerCase()==="it"||e.toLowerCase()==="brt")&&(t.style.display="block")},k=()=>{const t=document.getElementById("commercialProspect"),e=document.getElementById("user.attributes.commercialProspect");e.value=t.checked},A=()=>{const t=document.getElementById("advertisingConsent"),e=document.getElementById("user.attributes.advertisingConsent");e.value=t.checked};document.addEventListener("DOMContentLoaded",function(){const t=document.getElementsByClassName("privacy-link");for(var e=0;e<t.length;e++)t.item(e).setAttribute("target","_blank")});window.redirectToSocial=I;window.setCommercialProspect=k;window.setAdvertisingConsent=A;window.submitResetPwd=E;
